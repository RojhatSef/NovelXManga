@page
@model NovelXManga.Pages.SearchFilter.AdvancedSearchModel
@{
}


<link rel="stylesheet" href="~/css/AdvancedFilter.css" asp-append-version="true" />
<div class="AdvancedContainerContent ">


<form id="AdvancedSearch"  method=post asp-page-handler="AdvancedSearch" enctype="multipart/form-data">
    <div class="Row1">
            <input type="search" id="@Model.SearchAuthor" name="SearchAuthor" class="SearchAuthorClass" placeholder="SearchAuthor">
            <input type="search" id="@Model.SearchArtist" name="SearchArtist" class="SearchArtistClass" placeholder="SearchArtist">
            <input type="search" id="@Model.SearchVoiceActor" name="SearchVoiceActor" class="SearchVoiceActorClass" placeholder="SearchVoiceActor">
        </div>   
        <div class="Row2">
            <div class="LeftSide">
                <label >Tag Inclusion Mode:</label>
                <select id="TagInclusionMode" name="TagInclusionMode">
                    <option value="And" selected="@(Model.TagInclusionMode == "And")">And</option>
                    <option value="Or" selected="@(Model.TagInclusionMode == "Or")">Or</option>
                </select>
                <label >Tag Exclusion Mode:</label>
                <select id="TagExclusionMode" name="TagExclusionMode">
                    <option value="And" selected="@(Model.TagExclusionMode == "And")">And</option>
                    <option value="Or" selected="@(Model.TagExclusionMode == "Or")">Or</option>
                </select>
                <label>Genre Inclusion Mode:</label>
                <select id="GenreInclusionMode" name="GenreInclusionMode">
                    <option value="And" selected="@(Model.GenreInclusionMode == "And")">And</option>
                    <option value="Or" selected="@(Model.GenreInclusionMode == "Or")">Or</option>
                </select>
                <label>Tag Exclusion Mode:</label>
                <select id="GenreExclusionMode" name="GenreExclusionMode">
                    <option value="And" selected="@(Model.GenreExclusionMode == "And")">And</option>
                    <option value="Or" selected="@(Model.GenreExclusionMode == "Or")">Or</option>
                </select>

            </div>
            <div class="RightSide">
                <label for="SearchReleaseYearStart" class="CalendarIcon">Search Start Year:
                    <input type="date" id="SearchReleaseYearStart" name="SearchReleaseYearStart" placeholder="YYYY">
                </label>
                 <label for="SearchReleaseYearEnd" class="CalendarIcon">Search End Year:
                    <input type="date" id="SearchReleaseYearEnd"  name="SearchReleaseYearEnd" placeholder="YYYY">
                 </label>
            </div>
        </div>
    <div>
            <label for="SearchReleaseYearStart">Search Start Year:</label>
            <input type="date" id="SearchReleaseYearStart" name="SearchReleaseYearStart" placeholder="YYYY">
        </div>

        <div>
            <label for="SearchReleaseYearEnd">Search End Year:</label>
            <input type="date" id="SearchReleaseYearEnd" name="SearchReleaseYearEnd" placeholder="YYYY">
        </div>
@*        Positive Tag*@
        <div id="selectedTagsSection">
            <span>Selected Tags:</span>
            <span id="selectedTagsList"></span>
        </div>

        <div class="MUS-dropdown">
            <input type="text" id="tagInput" placeholder="Tags">
            <div class="MUS-dropdown-content" id="tagDropdown">
                @foreach (var tag in Model.Tags ?? new List<TagModel>())
                {
                    <div class="MUS-tag-genre-item" onclick="document.getElementById('tag-@tag.TagId').click();">
                        <input type="checkbox" class="MUS-hidden-checkbox" id="tag-@tag.TagId" name="SelectedTags" value="@tag.TagId" @(Model.SelectedTags?.Contains(tag.TagId) ?? false ? "checked" : "")>
                        <label class="MUS-tag-label" for="tag-@tag.TagId">@tag.TagName</label>
                    </div>
                }
            </div>
        </div>
      
        <div id="hiddenContainer"></div>

        @*Negative Tag*@
        <div id="negativeSelectedTagsSection">
            <span>Negative Selected Tags:</span>
            <span id="negativeSelectedTagsList"></span>
        </div>

        <div class="MUS-negative-dropdown">
            <input type="text" id="negativeTagInput" placeholder="Negative Tags">
            <div class="MUS-negative-dropdown-content" id="negativeTagDropdown">
                @foreach (var tag in Model.Tags ?? new List<TagModel>())
                {
                    <div class="MUS-negative-tag-genre-item" onclick="document.getElementById('negative-tag-@tag.TagId').click();">
                  <input type="checkbox" class="MUS-hidden-checkbox" id="negative-tag-@tag.TagId" value="@tag.TagId" @(Model.NegativeSelectedTags?.Contains(tag.TagId) ?? false ? "checked" : "")>


                        <label class="MUS-negative-tag-label" for="negative-tag-@tag.TagId">@tag.TagName</label>
                    </div>
                }
            </div>
        </div>
        <div id="negativeHiddenContainer"></div>




        
        <div>

            <label for="genres">Genres:</label>
            <div class="MUS-genre-container">
                @foreach (var genre in Model.Genres ?? new List<GenresModel>())
                {
                    <div class="MUS-genre" data-genre-id="@genre.GenresId">
                        <input type="checkbox" class="MUS-hidden-checkbox multi-state-checkbox" id="genre-@genre.GenresId" value="@genre.GenresId" @(Model.PositiveSelectedGenres?.Contains(genre.GenresId) ?? false ? "checked" : "") data-click-count="0">
                        <label for="genre-@genre.GenresId">@genre.GenreName</label>
                    </div>
                }
            </div>
            <div id="hiddenContainerPositive"></div>
            <div id="hiddenContainerNegative"></div>

       
        </div>



        <div class="">
            <button type="submit" id="searchButton" class="btn btn-custom-primary-login-forgott">Search</button>
        </div>
</form>
<hr style="width:100vh"/>


    <div class="MUS-cardFourOfaKind">

        <div class="MUS-CardFour">
            @if (Model.MangaModels.Any())
            {
                @foreach (var book in Model.MangaModels)
                {
                    <div class="MUS-FourOfAKind">

                        <a class="MUS-ANoneStyle" asp-page="/Manga/CurrentManga" asp-route-id="@book.MangaID">
                            <img class="MUS-BoxImage" src="~/Images/GeneratedMangaImage/@book.PhotoPath" />


                            <div class="MUS-FourofKindContent">
                                <h2>@book.MangaName</h2>
                                <p>@book.Description</p>


                            </div>
                        </a>
                    </div>
                }
            }
            else
            {
                <p>No manga found for your search criteria.</p>
            }


        </div>


    </div>
</div>

<script src="~/js/ShowHideTagsGenres.js" asp-append-version="true"></script>

*<script src="~/js/AdvancedFilter.js" asp-append-version="true"></script>
